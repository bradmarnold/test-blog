---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';
import PostCard from '@/components/PostCard.astro';
import { getCollection } from 'astro:content';

const base = import.meta.env.BASE_URL;

const posts = (await getCollection('blog', ({ data }) => !data.draft))
  .sort((a, b) => (b.data.publishedDate as Date).getTime() - (a.data.publishedDate as Date).getTime());
---
<BaseLayout title="Your Blog â€” Professional writing" description="A clean, fast blog to share your posts.">
  <Header />
  <main class="mx-auto max-w-3xl px-4 sm:px-6">
    <section class="mt-12">
      <h1 class="text-3xl font-semibold tracking-tight text-gray-900">Welcome</h1>
      <p class="mt-3 text-gray-600">A professional, minimalist blog with a pink accent.</p>
      <div class="mt-8 grid gap-6">
        {posts.map((p) => (
          <PostCard
            href={`${base}blog/${p.slug}/`}
            title={p.data.title}
            description={p.data.description}
            date={(p.data.publishedDate as Date).toISOString()}
            tags={p.data.tags}
          />
        ))}
      </div>
    </section>
  </main>
  <Footer />
</BaseLayout>